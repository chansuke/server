#
# MDEV-21027 Assertion `part_share->auto_inc_initialized || !can_use_for_auto_inc_init()' failed in ha_partition::set_auto_increment_if_higher
#

--source include/have_partition.inc

CREATE TABLE t1 (a INT AUTO_INCREMENT PRIMARY KEY) PARTITION BY HASH (a) PARTITIONS 3;
--error ER_ROW_DOES_NOT_MATCH_GIVEN_PARTITION_SET
REPLACE INTO t1 PARTITION (p0) VALUES (3),(8);
# Cleanup
DROP TABLE t1;

CREATE TABLE t1 (a INT AUTO_INCREMENT PRIMARY KEY) ENGINE=aria PARTITION BY HASH (a) PARTITIONS 3;
--error ER_ROW_DOES_NOT_MATCH_GIVEN_PARTITION_SET
REPLACE INTO t1 PARTITION (p0) VALUES (3),(8);
# Cleanup
DROP TABLE t1;

CREATE TABLE t1 (a INT AUTO_INCREMENT PRIMARY KEY) ENGINE=myisam PARTITION BY HASH (a) PARTITIONS 3;
--error ER_ROW_DOES_NOT_MATCH_GIVEN_PARTITION_SET
REPLACE INTO t1 PARTITION (p0) VALUES (3),(8);
# Cleanup
DROP TABLE t1;
